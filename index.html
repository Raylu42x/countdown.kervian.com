<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
  content="width=device-width, initial-scale=1, viewport-fit=cover">

<title>Countdown</title>

<style>
:root{
  --bg:#020617;
  --gold:#facc15;
  --hot:#fde68a;
}

*{box-sizing:border-box;font-family:system-ui,sans-serif}

html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
}

body{
  min-height:100svh;
  background:radial-gradient(circle at top,#312e81,var(--bg));
  color:#fff;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  overflow:hidden;
  padding:
    env(safe-area-inset-top)
    env(safe-area-inset-right)
    env(safe-area-inset-bottom)
    env(safe-area-inset-left);
}

canvas{
  position:fixed;
  inset:0;
  pointer-events:none;
}

h1{letter-spacing:.12em;margin-bottom:.5rem}

.controls{
  display:flex;
  gap:.5rem;
  flex-wrap:wrap;
  justify-content:center;
  margin-bottom:1rem;
}

input{
  padding:.6rem .9rem;
  border-radius:10px;
  border:none;
  font-weight:700;
}

#countdown{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:1rem;
  margin-top:1.5rem;
}

.box{
  background:rgba(255,255,255,.08);
  padding:1.2rem;
  border-radius:16px;
  backdrop-filter:blur(10px);
}

.box span{
  font-size:2.8rem;
  font-weight:900;
  color:var(--gold);
  text-shadow:0 0 16px rgba(250,204,21,.7);
}

#secondsOnly{
  display:none;
  font-size:7rem;
  font-weight:900;
  color:var(--hot);
  text-shadow:0 0 40px rgba(253,230,138,1);
}

body.final-hour .box{
  box-shadow:0 0 30px rgba(250,204,21,.6);
}

body.final-10 #secondsOnly{
  animation:pulse .6s infinite;
}

@keyframes pulse{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.15)}
}

@media(max-width:700px){
  #countdown{grid-template-columns:repeat(2,1fr)}
}
</style>
</head>

<body>

<canvas id="fx"></canvas>

<h1>COUNTDOWN</h1>

<div class="controls">
  <input type="date" id="date">
  <input type="time" id="time">
</div>

<div id="countdown">
  <div class="box"><span id="d">0</span><div>Days</div></div>
  <div class="box"><span id="h">0</span><div>Hours</div></div>
  <div class="box"><span id="m">0</span><div>Minutes</div></div>
  <div class="box"><span id="s">0</span><div>Seconds</div></div>
</div>

<div id="secondsOnly">60</div>

<script>
/* ---------- TARGET TIME ---------- */
const dateInput=document.getElementById("date");
const timeInput=document.getElementById("time");

/* default = next New Year */
const now=new Date();
dateInput.value=`${now.getFullYear()+1}-01-01`;
timeInput.value="00:00";

function getTarget(){
  return new Date(`${dateInput.value}T${timeInput.value}:00`).getTime();
}

/* ---------- COUNTDOWN ---------- */
const d=document.getElementById("d"),
      h=document.getElementById("h"),
      m=document.getElementById("m"),
      s=document.getElementById("s"),
      secOnly=document.getElementById("secondsOnly"),
      grid=document.getElementById("countdown");

function update(){
  const diff=getTarget()-Date.now();
  if(diff<=0){
    secOnly.textContent="DONE";
    bigFirework();
    return;
  }

  const t=Math.floor(diff/1000);
  const days=Math.floor(t/86400);
  const hours=Math.floor(t/3600)%24;
  const mins=Math.floor(t/60)%60;
  const secs=t%60;

  d.textContent=days;
  h.textContent=hours;
  m.textContent=mins;
  s.textContent=secs;

  if(t<=3600) document.body.classList.add("final-hour");

  if(t<=60){
    grid.style.display="none";
    secOnly.style.display="block";
    secOnly.textContent=secs;
  }

  if(t<=10) document.body.classList.add("final-10");
}
setInterval(update,1000);
update();

/* ---------- FIREWORKS ---------- */
const c=document.getElementById("fx"),ctx=c.getContext("2d");
function resize(){c.width=innerWidth;c.height=innerHeight}
onresize=resize;resize();

let particles=[];

function firework(x,y){
  for(let i=0;i<40;i++){
    const a=Math.random()*Math.PI*2;
    const v=Math.random()*4+2;
    particles.push({
      x,y,
      vx:Math.cos(a)*v,
      vy:Math.sin(a)*v,
      life:60
    });
  }
}

function bigFirework(){
  firework(c.width/2,c.height/3);
}

setInterval(()=>{
  firework(
    Math.random()*c.width,
    Math.random()*c.height*0.4
  );
},1200);

function draw(){
  ctx.clearRect(0,0,c.width,c.height);
  particles.forEach(p=>{
    p.x+=p.vx;
    p.y+=p.vy;
    p.vy+=0.04;
    p.life--;
    ctx.beginPath();
    ctx.arc(p.x,p.y,2,0,Math.PI*2);
    ctx.fillStyle=`rgba(250,204,21,${p.life/60})`;
    ctx.fill();
  });
  particles=particles.filter(p=>p.life>0);
  requestAnimationFrame(draw);
}
draw();
</script>

</body>
</html>
