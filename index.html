<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>New Year Countdown</title>

<style>
:root{
  --bg:#020617;
  --gold:#facc15;
  --hot:#fde68a;
}

*{box-sizing:border-box;font-family:system-ui,sans-serif}

body{
  margin:0;
  min-height:100vh;
  background:radial-gradient(circle at top,#312e81,var(--bg));
  color:#fff;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  overflow:hidden;
}

canvas{
  position:fixed;
  inset:0;
  pointer-events:none;
}

h1{letter-spacing:.12em}

#countdown{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:1.2rem;
  margin-top:2rem;
}

.box{
  background:rgba(255,255,255,.08);
  padding:1.3rem;
  border-radius:18px;
  backdrop-filter:blur(10px);
  transition:.4s;
}

.box span{
  font-size:3rem;
  font-weight:900;
  color:var(--gold);
  text-shadow:0 0 18px rgba(250,204,21,.7);
}

/* FINAL HOUR */
body.final-hour{
  background:radial-gradient(circle at top,#701a75,var(--bg));
}
body.final-hour .box{
  box-shadow:0 0 30px rgba(250,204,21,.6);
  transform:translateY(-4px);
}

/* FINAL SECONDS */
#secondsOnly{
  display:none;
  font-size:8rem;
  font-weight:900;
  color:var(--hot);
  text-shadow:0 0 40px rgba(253,230,138,1);
}

body.final-10 #secondsOnly{
  animation:pulse .6s infinite;
}

@keyframes pulse{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.15)}
}

button{
  margin-top:2rem;
  padding:.9rem 1.6rem;
  border:none;
  border-radius:14px;
  background:var(--gold);
  font-weight:900;
  cursor:pointer;
}

@media(max-width:700px){
  #countdown{grid-template-columns:repeat(2,1fr)}
}
</style>
</head>

<body>

<canvas id="fx"></canvas>

<h1>ðŸŽ† NEW YEAR COUNTDOWN ðŸŽ†</h1>

<div id="countdown">
  <div class="box"><span id="days">0</span><div>Days</div></div>
  <div class="box"><span id="hours">0</span><div>Hours</div></div>
  <div class="box"><span id="minutes">0</span><div>Minutes</div></div>
  <div class="box"><span id="seconds">0</span><div>Seconds</div></div>
</div>

<div id="secondsOnly">60</div>

<button id="start">ðŸ”Š Enable Sound & Fullscreen</button>

<audio id="tick" preload="auto">
  <source src="https://assets.mixkit.co/sfx/preview/mixkit-click-clock-timer-1079.wav">
</audio>
<audio id="boom" preload="auto">
  <source src="https://assets.mixkit.co/sfx/preview/mixkit-explosion-firework-1683.wav">
</audio>

<script>
const els={
  d:document.getElementById("days"),
  h:document.getElementById("hours"),
  m:document.getElementById("minutes"),
  s:document.getElementById("seconds"),
  secOnly:document.getElementById("secondsOnly"),
  countdown:document.getElementById("countdown"),
  start:document.getElementById("start"),
  tick:document.getElementById("tick"),
  boom:document.getElementById("boom")
};

let soundEnabled=false;

/* SAFELY calculate next New Year in LOCAL time */
function getNextNewYear(){
  const now=new Date();
  const year=now.getFullYear()+1;
  return new Date(year,0,1,0,0,0).getTime();
}
const target=getNextNewYear();

/* Button: REQUIRED for mobile audio */
els.start.addEventListener("click",()=>{
  soundEnabled=true;

  els.tick.play().catch(()=>{});
  els.tick.pause();
  els.tick.currentTime=0;

  if(document.documentElement.requestFullscreen){
    document.documentElement.requestFullscreen().catch(()=>{});
  }
  els.start.remove();
});

function update(){
  const diff=target-Date.now();
  if(diff<=0){
    els.secOnly.textContent="ðŸŽ‰";
    if(soundEnabled) els.boom.play();
    return;
  }

  const totalSec=Math.floor(diff/1000);
  const days=Math.floor(totalSec/86400);
  const hours=Math.floor(totalSec/3600)%24;
  const mins=Math.floor(totalSec/60)%60;
  const secs=totalSec%60;

  els.d.textContent=days;
  els.h.textContent=hours;
  els.m.textContent=mins;
  els.s.textContent=secs;

  if(totalSec<=3600) document.body.classList.add("final-hour");

  if(totalSec<=60){
    els.countdown.style.display="none";
    els.secOnly.style.display="block";
    els.secOnly.textContent=secs;
    if(soundEnabled){
      els.tick.currentTime=0;
      els.tick.play();
    }
  }

  if(totalSec<=10) document.body.classList.add("final-10");
}

setInterval(update,1000);
update();

/* FIREWORKS */
const c=document.getElementById("fx"),ctx=c.getContext("2d");
let sparks=[];
function resize(){c.width=innerWidth;c.height=innerHeight}
onresize=resize;resize();

function explode(){
  for(let i=0;i<60;i++){
    sparks.push({
      x:Math.random()*c.width,
      y:Math.random()*c.height*.5,
      vx:(Math.random()-.5)*8,
      vy:(Math.random()-.5)*8,
      life:80
    });
  }
}
setInterval(explode,900);

function draw(){
  ctx.clearRect(0,0,c.width,c.height);
  sparks.forEach(p=>{
    p.x+=p.vx;p.y+=p.vy;p.life--;
    ctx.beginPath();
    ctx.arc(p.x,p.y,2,0,Math.PI*2);
    ctx.fillStyle="rgba(250,204,21,.8)";
    ctx.fill();
  });
  sparks=sparks.filter(p=>p.life>0);
  requestAnimationFrame(draw);
}
draw();
</script>

</body>
</html>
